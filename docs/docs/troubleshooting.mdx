---
sidebar_position: 6
description: Fix common issues when using True Native Bottom Sheet.
keywords: [bottom sheet troubleshooting, fixing bottom sheet, debugging bottom sheet]
---

# Troubleshooting

## React Native Gesture Handler

[`react-native-gesture-handler`](https://docs.swmansion.com/react-native-gesture-handler/docs/)

On Android, [RNGH does not work](https://docs.swmansion.com/react-native-gesture-handler/docs/fundamentals/installation/#usage-with-modals-on-android) by default because modals are not located under React Native Root view in native hierarchy. To fix that, components need to be wrapped with `GestureHandlerRootView`.

```tsx
import { GestureHandlerRootView } from 'react-native-gesture-handler'
```

```tsx {3-5}
return (
  <TrueSheet ref={sheet}>
    <GestureHandlerRootView style={{ flexGrow: 1 }}>
      <View />
    </GestureHandlerRootView>
  </TrueSheet>
)
```

:::info
Note that we are using `flexGrow` instead of `flex` here. For some weird reason, `flex` does not work correctly. See [below](#weird-layout-render).
:::

## React Navigation

[`react-navigation`](https://reactnavigation.org)

### Navigating from Sheet

You can now navigate to other screens from within a sheet without any issues! The sheet will remain visible in the background when presenting modals on top.

Example:
```tsx
const sheet = useRef<TrueSheet>(null)

const navigate = () => {
  // Navigate directly - no need to dismiss first! âœ…
  navigation.navigate('SomeScreen')
}

return (
  <TrueSheet ref={sheet}>
    <Button onPress={navigate} title="Navigate to SomeScreen" />
    <View />
  </TrueSheet>
)
```

:::tip
If you prefer to dismiss the sheet before navigating for UX reasons, you can still do so:
```tsx
const navigate = async () => {
  await sheet.current?.dismiss()
  navigation.navigate('SomeScreen')
}
```
:::

### Present during Mount

On iOS, when setting [`initialDetentIndex`](/reference/props#initialdetentindex) and enabling `initialDetentAnimated` (default is `true`) to present during mount, the presentation animation becomes weird. This happens because RNN is not yet finished when the sheet is trying to present.

To solve this, you can do the following:

1. Set `initialDetentAnimated` to `false`. Disables animation during mount.

```tsx
return (
  <TrueSheet initialDetentIndex={0} initialDetentAnimated={false}>
    <View />
  </TrueSheet>
)
```

2. Wait for the screen to fully transition. See [`transitionEnd`](https://reactnavigation.org/docs/native-stack-navigator/#transitionend) event.

```tsx
const navigation = useNavigation()
const [isScreenShown, setIsScreenShown] = useState(false)

// Subscribe to the transitionEnd event âœ…
useEffect(() => {
  const unsubscribe = navigation.addListener("transitionEnd", ({ data }) => {
    if (!data.closing) {
      setIsScreenShown(true)
    }
  })

  return unsubscribe
}, [])

// Wait for the screen to finish transitioning âœ…
if (!isScreenShown) return null

// Finally show the sheet ðŸŽ‰
return (
  <TrueSheet initialDetentIndex={0} initialDetentAnimated>
    <View />
  </TrueSheet>
)
```

## Weird layout render

The sheet does not have control over how React Native renders components and may lead to rendering issues. To resolve this, try to minimize the use of `flex=1` in your content styles. Instead, use fixed `height` or employ `flexGrow`, `flexBasis`, etc., to manage your layout requirements.
